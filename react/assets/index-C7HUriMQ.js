var jt=t=>Math.max(0,Math.min(1,t)),Ie=(t,e)=>t.map((s,n)=>t[(Math.max(e,0)+n)%t.length]),yt=t=>typeof t=="object"&&t!==null,xn=2147483647,Fe=1,De=9,Le=11,S=t=>yt(t)&&t.nodeType===Fe&&typeof t.nodeName=="string",It=t=>yt(t)&&t.nodeType===De,ke=t=>yt(t)&&t===t.window,ie=t=>S(t)?t.localName||"":"#document";function xe(t){return["html","body","#document"].includes(ie(t))}var Re=t=>yt(t)&&t.nodeType!==void 0,ft=t=>Re(t)&&t.nodeType===Le&&"host"in t,Me=t=>S(t)&&t.localName==="input",_e=t=>S(t)?t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0:!1,Be=/(textarea|select)/;function je(t){if(t==null||!S(t))return!1;try{return Me(t)&&t.selectionStart!=null||Be.test(t.localName)||t.isContentEditable||t.getAttribute("contenteditable")==="true"||t.getAttribute("contenteditable")===""}catch{return!1}}function ht(t,e){var n;if(!t||!e||!S(t)||!S(e))return!1;const s=(n=e.getRootNode)==null?void 0:n.call(e);if(t===e||t.contains(e))return!0;if(s&&ft(s)){let i=e;for(;i;){if(t===i)return!0;i=i.parentNode||i.host}}return!1}function _(t){return It(t)?t:ke(t)?t.document:(t==null?void 0:t.ownerDocument)??document}function $e(t){return _(t).documentElement}function H(t){var e;return ft(t)?H(t.host):It(t)?t.defaultView??window:S(t)?((e=t.ownerDocument)==null?void 0:e.defaultView)??window:window}function re(t){let e=t.activeElement;for(;e!=null&&e.shadowRoot;){const s=e.shadowRoot.activeElement;if(s===e)break;e=s}return e}function We(t){if(ie(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ft(t)&&t.host||$e(t);return ft(e)?e.host:e}var vt=new WeakMap;function Ve(t){return vt.has(t)||vt.set(t,H(t).getComputedStyle(t)),vt.get(t)}var oe=()=>typeof document<"u";function Ke(){const t=navigator.userAgentData;return(t==null?void 0:t.platform)??navigator.platform}var Ft=t=>oe()&&t.test(Ke()),Ge=t=>oe()&&t.test(navigator.vendor),Ye=()=>Ft(/^Mac/),Rn=()=>ze()&&Ge(/apple/i),ze=()=>Ft(/mac|iphone|ipad|ipod/i),He=()=>Ft(/iP(hone|ad|od)|iOS/);function Xe(t){var e,s,n;return((e=t.composedPath)==null?void 0:e.call(t))??((n=(s=t.nativeEvent)==null?void 0:s.composedPath)==null?void 0:n.call(s))}function R(t){const e=Xe(t);return(e==null?void 0:e[0])??t.target}var qe=t=>t.button===2||Ye()&&t.ctrlKey&&t.button===0,D=(t,e,s,n)=>{const i=typeof t=="function"?t():t;return i==null||i.addEventListener(e,s,n),()=>{i==null||i.removeEventListener(e,s,n)}};function Ue(t,e){const{type:s="HTMLInputElement",property:n="value"}=e,i=H(t)[s].prototype;return Object.getOwnPropertyDescriptor(i,n)??{}}function Ze(t){if(t.localName==="input")return"HTMLInputElement";if(t.localName==="textarea")return"HTMLTextAreaElement";if(t.localName==="select")return"HTMLSelectElement"}function ae(t,e,s="value"){var i;const n=Ze(t);n&&((i=Ue(t,{type:n,property:s}).set)==null||i.call(t,e)),t.setAttribute(s,e)}function Mn(t,e){const{value:s,bubbles:n=!0}=e;if(!t)return;const i=H(t);t instanceof i.HTMLInputElement&&(ae(t,`${s}`),t.dispatchEvent(new i.Event("input",{bubbles:n})))}var ce=t=>S(t)&&t.tagName==="IFRAME",Je=t=>!Number.isNaN(parseInt(t.getAttribute("tabindex")||"0",10)),Qe=t=>parseInt(t.getAttribute("tabindex")||"0",10)<0,Dt="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",ue=(t,e=!1)=>{if(!t)return[];const s=Array.from(t.querySelectorAll(Dt));(e==!0||e=="if-empty"&&s.length===0)&&S(t)&&M(t)&&s.unshift(t);const i=s.filter(M);return i.forEach((a,u)=>{if(ce(a)&&a.contentDocument){const r=a.contentDocument.body;i.splice(u,1,...ue(r))}}),i};function M(t){return!t||t.closest("[inert]")?!1:t.matches(Dt)&&_e(t)}function le(t,e){if(!t)return[];const n=Array.from(t.querySelectorAll(Dt)).filter(j);return n.forEach((i,a)=>{if(ce(i)&&i.contentDocument){const u=i.contentDocument.body,r=le(u);n.splice(a,1,...r)}}),n.length,n}function j(t){return t!=null&&t.tabIndex>0?!0:M(t)&&!Qe(t)}function U(t){return t.tabIndex<0&&(/^(audio|video|details)$/.test(t.localName)||je(t))&&!Je(t)?0:t.tabIndex}function V(t){const e=globalThis.requestAnimationFrame(t);return()=>{globalThis.cancelAnimationFrame(e)}}function Tt(t){const e=We(t);return xe(e)?_(e).body:S(e)&&es(e)?e:Tt(e)}var ts=/auto|scroll|overlay|hidden|clip/;function es(t){const e=H(t),{overflow:s,overflowX:n,overflowY:i,display:a}=e.getComputedStyle(t);return ts.test(s+i+n)&&!["inline","contents"].includes(a)}function _n(t,e){const{left:s,top:n,width:i,height:a}=e.getBoundingClientRect(),u={x:t.x-s,y:t.y-n},r={x:jt(u.x/i),y:jt(u.y/a)};function c(o={}){const{dir:l="ltr",orientation:f="horizontal",inverted:d}=o,h=typeof d=="object"?d.x:d,p=typeof d=="object"?d.y:d;return f==="horizontal"?l==="rtl"||h?1-r.x:r.x:p?1-r.y:r.y}return{offset:u,percent:r,getPercentValue:c}}function Bn(t,e){return Array.from((t==null?void 0:t.querySelectorAll(e))??[])}function jn(t,e){return(t==null?void 0:t.querySelector(e))??null}var Lt=t=>t.id;function ss(t,e,s=Lt){return t.find(n=>s(n)===e)}function kt(t,e,s=Lt){const n=ss(t,e,s);return n?t.indexOf(n):-1}function $n(t,e,s=!0){let n=kt(t,e);return n=s?(n+1)%t.length:Math.min(n+1,t.length-1),t[n]}function Wn(t,e,s=!0){let n=kt(t,e);return n===-1?s?t[t.length-1]:null:(n=s?(n-1+t.length)%t.length:Math.max(0,n-1),t[n])}function ns(t){const e={getRootNode:s=>{var n;return((n=s.getRootNode)==null?void 0:n.call(s))??document},getDoc:s=>_(e.getRootNode(s)),getWin:s=>e.getDoc(s).defaultView??window,getActiveElement:s=>re(e.getRootNode(s)),isActiveElement:(s,n)=>n===e.getActiveElement(s),getById:(s,n)=>e.getRootNode(s).getElementById(n),setValue:(s,n)=>{s==null||n==null||ae(s,n.toString())}};return{...e,...t}}var is=t=>t.split("").map(e=>{const s=e.charCodeAt(0);return s>0&&s<128?e:s>=128&&s<=255?`/x${s.toString(16)}`.replace("/","\\"):""}).join("").trim(),rs=t=>{var e;return is(((e=t.dataset)==null?void 0:e.valuetext)??t.textContent??"")},os=(t,e)=>t.trim().toLowerCase().startsWith(e.toLowerCase());function as(t,e,s,n=Lt){const i=s?kt(t,s,n):-1;let a=s?Ie(t,i):t;return e.length===1&&(a=a.filter(r=>n(r)!==s)),a.find(r=>os(rs(r),e))}var mt=new WeakMap;function cs(t,e,s){mt.has(t)||mt.set(t,new Map);const n=mt.get(t),i=n.get(e);if(!i)return n.set(e,s()),()=>{var r;(r=n.get(e))==null||r(),n.delete(e)};const a=s(),u=()=>{a(),i(),n.delete(e)};return n.set(e,u),()=>{n.get(e)===u&&(a(),n.set(e,i))}}function us(t,e){return t?cs(t,"style",()=>{const n=t.style.cssText;return Object.assign(t.style,e),()=>{t.style.cssText=n}}):()=>{}}function ls(t,e){const{state:s,activeId:n,key:i,timeout:a=350,itemToId:u}=e,r=s.keysSoFar+i,o=r.length>1&&Array.from(r).every(p=>p===r[0])?r[0]:r;let l=t.slice();const f=as(l,o,n,u);function d(){clearTimeout(s.timer),s.timer=-1}function h(p){s.keysSoFar=p,d(),p!==""&&(s.timer=+setTimeout(()=>{h(""),d()},a))}return h(r),f}var Vn=Object.assign(ls,{defaultOptions:{keysSoFar:"",timer:-1},isValidEvent:ds});function ds(t){return t.key.length===1&&!t.ctrlKey&&!t.metaKey}var fs=1e3/60;function hs(t,e){const s=t();if(S(s)&&s.isConnected)return e(s),()=>{};{const n=setInterval(()=>{const i=t();S(i)&&i.isConnected&&(e(i),clearInterval(n))},fs);return()=>clearInterval(n)}}function ps(t,e){const s=[];return t==null||t.forEach(n=>{const i=hs(n,e);s.push(i)}),()=>{s.forEach(n=>n())}}const gs=Symbol(),xt=Symbol(),tt="a",de="f",$t="p",fe="c",he="t",pe="h",at="w",ge="o",ye="k";let ys=(t,e)=>new Proxy(t,e);const Nt=Object.getPrototypeOf,St=new WeakMap,be=t=>t&&(St.has(t)?St.get(t):Nt(t)===Object.prototype||Nt(t)===Array.prototype),Wt=t=>typeof t=="object"&&t!==null,bs=t=>Object.values(Object.getOwnPropertyDescriptors(t)).some(e=>!e.configurable&&!e.writable),vs=t=>{if(Array.isArray(t))return Array.from(t);const e=Object.getOwnPropertyDescriptors(t);return Object.values(e).forEach(s=>{s.configurable=!0}),Object.create(Nt(t),e)},ms=(t,e)=>{const s={[de]:e};let n=!1;const i=(r,c)=>{if(!n){let o=s[tt].get(t);if(o||(o={},s[tt].set(t,o)),r===at)o[at]=!0;else{let l=o[r];l||(l=new Set,o[r]=l),l.add(c)}}},a=()=>{n=!0,s[tt].delete(t)},u={get(r,c){return c===xt?t:(i(ye,c),Es(Reflect.get(r,c),s[tt],s[fe],s[he]))},has(r,c){return c===gs?(a(),!0):(i(pe,c),Reflect.has(r,c))},getOwnPropertyDescriptor(r,c){return i(ge,c),Reflect.getOwnPropertyDescriptor(r,c)},ownKeys(r){return i(at),Reflect.ownKeys(r)}};return e&&(u.set=u.deleteProperty=()=>!1),[u,s]},ve=t=>t[xt]||t,Es=(t,e,s,n)=>{if(!be(t))return t;let i=n&&n.get(t);if(!i){const c=ve(t);bs(c)?i=[c,vs(c)]:i=[c],n==null||n.set(t,i)}const[a,u]=i;let r=s&&s.get(a);return(!r||r[1][de]!==!!u)&&(r=ms(a,!!u),r[1][$t]=ys(u||a,r[0]),s&&s.set(a,r)),r[1][tt]=e,r[1][fe]=s,r[1][he]=n,r[1][$t]},Os=(t,e)=>{const s=Reflect.ownKeys(t),n=Reflect.ownKeys(e);return s.length!==n.length||s.some((i,a)=>i!==n[a])},ws=(t,e,s,n,i=Object.is)=>{if(i(t,e))return!1;if(!Wt(t)||!Wt(e))return!0;const a=s.get(ve(t));if(!a)return!0;if(n){if(n.get(t)===e)return!1;n.set(t,e)}let u=null;for(const r of a[pe]||[])if(u=Reflect.has(t,r)!==Reflect.has(e,r),u)return u;if(a[at]===!0){if(u=Os(t,e),u)return u}else for(const r of a[ge]||[]){const c=!!Reflect.getOwnPropertyDescriptor(t,r),o=!!Reflect.getOwnPropertyDescriptor(e,r);if(u=c!==o,u)return u}for(const r of a[ye]||[])if(u=ws(t[r],e[r],s,n,i),u)return u;if(u===null)throw new Error("invalid used");return u},Ts=t=>be(t)&&t[xt]||null,Vt=(t,e=!0)=>{St.set(t,e)};function Ns(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function me(t,e){const s=Ns();return s?(s[t]||(s[t]=e()),s[t]):e()}var et=me("__zag__refSet",()=>new WeakSet),Ss=t=>typeof t=="object"&&t!==null&&"$$typeof"in t&&"props"in t,Ps=t=>typeof t=="object"&&t!==null&&"__v_isVNode"in t,As=t=>typeof t=="object"&&t!==null&&"nodeType"in t&&typeof t.nodeName=="string",Cs=t=>Ss(t)||Ps(t)||As(t),Pt=t=>t!==null&&typeof t=="object",At=t=>Pt(t)&&!et.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!Cs(t)&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise);function Kt(t,e,s){typeof s.value=="object"&&!At(s.value)&&(s.value=W(s.value)),!s.enumerable||s.get||s.set||!s.configurable||!s.writable||e==="__proto__"?Object.defineProperty(t,e,s):t[e]=s.value}function W(t){if(typeof t!="object")return t;var e=0,s,n,i,a=Object.prototype.toString.call(t);if(a==="[object Object]"?i=Object.create(Object.getPrototypeOf(t)||null):a==="[object Array]"?i=Array(t.length):a==="[object Set]"?(i=new Set,t.forEach(function(u){i.add(W(u))})):a==="[object Map]"?(i=new Map,t.forEach(function(u,r){i.set(W(r),W(u))})):a==="[object Date]"?i=new Date(+t):a==="[object RegExp]"?i=new RegExp(t.source,t.flags):a==="[object DataView]"?i=new t.constructor(W(t.buffer)):a==="[object ArrayBuffer]"?i=t.slice(0):a==="[object Blob]"?i=t.slice():a.slice(-6)==="Array]"&&(i=new t.constructor(t)),i){for(n=Object.getOwnPropertySymbols(t);e<n.length;e++)Kt(i,n[e],Object.getOwnPropertyDescriptor(t,n[e]));for(e=0,n=Object.getOwnPropertyNames(t);e<n.length;e++)Object.hasOwnProperty.call(i,s=n[e])&&i[s]===t[s]||Kt(i,s,Object.getOwnPropertyDescriptor(t,s))}return i||t}var $=me("__zag__proxyStateMap",()=>new WeakMap),Is=(t=Object.is,e=(r,c)=>new Proxy(r,c),s=new WeakMap,n=(r,c)=>{const o=s.get(r);if((o==null?void 0:o[0])===c)return o[1];const l=Array.isArray(r)?[]:Object.create(Object.getPrototypeOf(r));return Vt(l,!0),s.set(r,[c,l]),Reflect.ownKeys(r).forEach(f=>{const d=Reflect.get(r,f);et.has(d)?(Vt(d,!1),l[f]=d):$.has(d)?l[f]=z(d):l[f]=d}),Object.freeze(l)},i=new WeakMap,a=[1,1],u=r=>{if(!Pt(r))throw new Error("object required");const c=i.get(r);if(c)return c;let o=a[0];const l=new Set,f=(O,m=++a[0])=>{o!==m&&(o=m,l.forEach(E=>E(O,m)))};let d=a[1];const h=(O=++a[1])=>(d!==O&&!l.size&&(d=O,y.forEach(([m])=>{const E=m[1](O);E>o&&(o=E)})),o),p=O=>(m,E)=>{const A=[...m];A[1]=[O,...A[1]],f(A,E)},y=new Map,T=(O,m)=>{if(l.size){const E=m[3](p(O));y.set(O,[m,E])}else y.set(O,[m])},b=O=>{var E;const m=y.get(O);m&&(y.delete(O),(E=m[1])==null||E.call(m))},N=O=>(l.add(O),l.size===1&&y.forEach(([E,A],K)=>{const q=E[3](p(K));y.set(K,[E,q])}),()=>{l.delete(O),l.size===0&&y.forEach(([E,A],K)=>{A&&(A(),y.set(K,[E]))})}),P=Array.isArray(r)?[]:Object.create(Object.getPrototypeOf(r)),L=e(P,{deleteProperty(O,m){const E=Reflect.get(O,m);b(m);const A=Reflect.deleteProperty(O,m);return A&&f(["delete",[m],E]),A},set(O,m,E,A){var _t;const K=Reflect.has(O,m),q=Reflect.get(O,m,A);if(K&&(t(q,E)||i.has(E)&&t(q,i.get(E))))return!0;b(m),Pt(E)&&(E=Ts(E)||E);let nt=E;if(!((_t=Object.getOwnPropertyDescriptor(O,m))!=null&&_t.set)){!$.has(E)&&At(E)&&(nt=Rt(E));const Bt=!et.has(nt)&&$.get(nt);Bt&&T(m,Bt)}return Reflect.set(O,m,nt,A),f(["set",[m],E,q]),!0}});i.set(r,L);const X=[P,h,n,N];return $.set(L,X),Reflect.ownKeys(r).forEach(O=>{const m=Object.getOwnPropertyDescriptor(r,O);m.get||m.set?Object.defineProperty(P,O,m):L[O]=r[O]}),L})=>[u,$,et,t,e,At,s,n,i,a],[Fs]=Is();function Rt(t={}){return Fs(t)}function Gt(t,e,s){const n=$.get(t);let i;const a=[],u=n[3];let r=!1;const o=u(l=>{if(a.push(l),s){e(a.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,r&&e(a.splice(0))}))});return r=!0,()=>{r=!1,o()}}function z(t){const e=$.get(t),[s,n,i]=e;return i(s,n())}function Yt(t){return et.add(t),t}function Ds(t,e){Object.keys(e).forEach(i=>{if(Object.getOwnPropertyDescriptor(t,i))throw new Error("object property already defined");const a=e[i],{get:u,set:r}=typeof a=="function"?{get:a}:a,c={};c.get=()=>u(z(n)),r&&(c.set=o=>r(n,o)),Object.defineProperty(t,i,c)});const n=Rt(t);return n}var Kn=t=>t[0],Gn=t=>t[t.length-1];function Ls(t){for(;t.length>0;)t.pop();return t}var zt=(t,...e)=>(typeof t=="function"?t(...e):t)??void 0,k=t=>t,ks=()=>{},Ct=(...t)=>(...e)=>{t.forEach(function(s){s==null||s(...e)})},Ht=(()=>{let t=0;return()=>(t++,t.toString(36))})(),pt=t=>Array.isArray(t),Ee=t=>t!=null&&typeof t=="object",ct=t=>Ee(t)&&!pt(t),xs=t=>typeof t=="number"&&!Number.isNaN(t),C=t=>typeof t=="string",gt=t=>typeof t=="function",Oe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Rs=t=>Object.prototype.toString.call(t),we=Function.prototype.toString,Ms=we.call(Object),it=t=>{if(!Ee(t)||Rs(t)!="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const s=Oe(e,"constructor")&&e.constructor;return typeof s=="function"&&s instanceof s&&we.call(s)==Ms},{floor:_s,round:Te,min:Bs,max:js}=Math,$s=t=>Number.isNaN(t),Mt=t=>$s(t)?0:t,Yn=(t,e)=>(t%e+e)%e,Ws=(t,e,s)=>Te((Mt(t)-e)/s)*s+e,Vs=(t,e,s)=>Bs(js(Mt(t),e),s),zn=(t,e,s)=>(Mt(t)-e)/(s-e),Hn=(t,e,s,n)=>Vs(Ws(t*(s-e)+e,e,n),e,s),Xn=(t,e)=>typeof e=="number"?_s(t*e+.5)/e:Te(t),qn=(t,e)=>{const[s,n]=t,[i,a]=e;return u=>s===n||i===a?i:i+(a-i)/(n-s)*(u-s)};function bt(t){if(!Ks(t)||t===void 0)return t;const e=Reflect.ownKeys(t).filter(n=>typeof n=="string"),s={};for(const n of e){const i=t[n];i!==void 0&&(s[n]=bt(i))}return s}var Ks=t=>t&&typeof t=="object"&&t.constructor===Object;function ut(...t){t.length===1?t[0]:t[1],t.length===2&&t[0]}function lt(...t){t.length===1?t[0]:t[1],t.length===2&&t[0]}var Gs=Object.defineProperty,Ys=(t,e,s)=>e in t?Gs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,g=(t,e,s)=>Ys(t,typeof e!="symbol"?e+"":e,s);function Ne(t,...e){if(!it(t))throw new TypeError("Source argument must be a plain object");for(const s of e){if(!it(s))continue;const n=bt(s);for(const i in n){if(!Object.prototype.hasOwnProperty.call(n,i)||i==="__proto__"||i==="constructor"||i==="prototype")continue;const a=t[i],u=s[i];it(u)?t[i]=it(a)?Ne(a,u):{...u}:t[i]=u}}return t}function I(t){return C(t)?{type:t}:t}function x(t){return t?pt(t)?t.slice():[t]:[]}function Se(t){return ct(t)&&t.predicate!=null}var zs=()=>!0;function Pe(t,e){return t=t??zs,(s,n,i)=>{if(C(t)){const a=e[t];return gt(a)?a(s,n,i):a}return Se(t)?t.predicate(e)(s,n,i):t==null?void 0:t(s,n,i)}}function Et(t,e){return(s,n,i)=>Se(t)?t.predicate(e)(s,n,i):t}function Hs(t){var a,u;const e=t.computed??k({}),s=t.context??k({}),n=t.initial?(u=(a=t.states)==null?void 0:a[t.initial])==null?void 0:u.tags:[],i=Rt({value:t.initial??"",previousValue:"",event:k({}),previousEvent:k({}),context:Ds(s,e),done:!1,tags:n??[],hasTag(r){return this.tags.includes(r)},matches(...r){return r.includes(this.value)},can(r){return k(this).nextEvents.includes(r)},get nextEvents(){var o,l;const r=((l=(o=t.states)==null?void 0:o[this.value])==null?void 0:l.on)??{},c=(t==null?void 0:t.on)??{};return Object.keys({...r,...c})},get changed(){return this.event.value==="machine.init"||!this.previousValue?!1:this.value!==this.previousValue}});return k(i)}function Z(t,e){return(s,n)=>{if(xs(t))return t;if(gt(t))return t(s,n);if(C(t)){const i=Number.parseFloat(t);if(!Number.isNaN(i))return i;if(e){const a=e==null?void 0:e[t];return lt(a==null,`[@zag-js/core > determine-delay] Cannot determine delay for \`${t}\`. It doesn't exist in \`options.delays\``),gt(a)?a(s,n):a}}}}function Xs(t){return C(t)?{target:t}:t}function qs(t,e){return(s,n,i)=>x(t).map(Xs).find(a=>Pe(a.guard,e)(s,n,i)??a.target??a.actions)}var Us=class{constructor(t,e){var s,n,i,a,u;g(this,"status","Not Started"),g(this,"state"),g(this,"initialState"),g(this,"initialContext"),g(this,"id"),g(this,"type","machine"),g(this,"activityEvents",new Map),g(this,"delayedEvents",new Map),g(this,"stateListeners",new Set),g(this,"doneListeners",new Set),g(this,"contextWatchers",new Set),g(this,"removeStateListener",ks),g(this,"parent"),g(this,"children",new Map),g(this,"guardMap"),g(this,"actionMap"),g(this,"delayMap"),g(this,"activityMap"),g(this,"sync"),g(this,"options"),g(this,"config"),g(this,"_created",()=>{if(!this.config.created)return;const r=I("machine.created");this.executeActions(this.config.created,r)}),g(this,"start",r=>{if(this.state.value="",this.state.tags=[],this.status==="Running")return this;this.status="Running",this.removeStateListener=Gt(this.state,()=>{this.stateListeners.forEach(h=>{h(this.stateSnapshot)})},this.sync),this.setupContextWatchers(),this.executeActivities(I("machine.start"),x(this.config.activities),"machine.start"),this.executeActions(this.config.entry,I("machine.start"));const c=I("machine.init"),o=ct(r)?r.value:r,l=ct(r)?r.context:void 0;l&&this.setContext(l);const f={target:o??this.config.initial},d=this.getNextStateInfo(f,c);return this.initialState=d,this.performStateChangeEffects(this.state.value,d,c),this}),g(this,"setupContextWatchers",()=>{const{watch:r}=this.config;if(!r)return;let c=z(this.state.context);const o=Gt(this.state.context,()=>{var f;const l=z(this.state.context);for(const[d,h]of Object.entries(r))(((f=this.options.compareFns)==null?void 0:f[d])??Object.is)(c[d],l[d])||this.executeActions(h,this.state.event);c=l});this.contextWatchers.add(o)}),g(this,"stop",()=>{if(this.status!=="Stopped")return this.performExitEffects(this.state.value,I("machine.stop")),this.executeActions(this.config.exit,I("machine.stop")),this.setState(""),this.setEvent("machine.stop"),this.stopStateListeners(),this.stopChildren(),this.stopActivities(),this.stopDelayedEvents(),this.stopContextWatchers(),this.status="Stopped",this}),g(this,"stopStateListeners",()=>{this.removeStateListener(),this.stateListeners.clear()}),g(this,"stopContextWatchers",()=>{this.contextWatchers.forEach(r=>r()),this.contextWatchers.clear()}),g(this,"stopDelayedEvents",()=>{this.delayedEvents.forEach(r=>{r.forEach(c=>c())}),this.delayedEvents.clear()}),g(this,"stopActivities",r=>{var c,o;r?((c=this.activityEvents.get(r))==null||c.forEach(l=>l()),(o=this.activityEvents.get(r))==null||o.clear(),this.activityEvents.delete(r)):(this.activityEvents.forEach(l=>{l.forEach(f=>f()),l.clear()}),this.activityEvents.clear())}),g(this,"sendChild",(r,c)=>{const o=I(r),l=zt(c,this.contextSnapshot),f=this.children.get(l);f||lt(`[@zag-js/core] Cannot send '${o.type}' event to unknown child`),f.send(o)}),g(this,"stopChild",r=>{this.children.has(r)||lt(`[@zag-js/core > stop-child] Cannot stop unknown child ${r}`),this.children.get(r).stop(),this.children.delete(r)}),g(this,"removeChild",r=>{this.children.delete(r)}),g(this,"stopChildren",()=>{this.children.forEach(r=>r.stop()),this.children.clear()}),g(this,"setParent",r=>{this.parent=r}),g(this,"spawn",(r,c)=>{const o=zt(r);return c&&(o.id=c),o.type="machine.actor",o.setParent(this),this.children.set(o.id,k(o)),o.onDone(()=>{this.removeChild(o.id)}).start(),k(Yt(o))}),g(this,"stopActivity",r=>{var o;if(!this.state.value)return;const c=this.activityEvents.get(this.state.value);(o=c==null?void 0:c.get(r))==null||o(),c==null||c.delete(r)}),g(this,"addActivityCleanup",(r,c,o)=>{var l;r&&(this.activityEvents.has(r)?(l=this.activityEvents.get(r))==null||l.set(c,o):this.activityEvents.set(r,new Map([[c,o]])))}),g(this,"setState",r=>{this.state.previousValue=this.state.value,this.state.value=r;const c=this.getStateNode(r);r==null?Ls(this.state.tags):this.state.tags=x(c==null?void 0:c.tags)}),g(this,"setContext",r=>{r&&Ne(this.state.context,r)}),g(this,"setOptions",r=>{const c=bt(r);this.actionMap={...this.actionMap,...c.actions},this.delayMap={...this.delayMap,...c.delays},this.activityMap={...this.activityMap,...c.activities},this.guardMap={...this.guardMap,...c.guards}}),g(this,"getStateNode",r=>{var c;if(r)return(c=this.config.states)==null?void 0:c[r]}),g(this,"getNextStateInfo",(r,c)=>{const o=this.determineTransition(r,c),l=!(o!=null&&o.target),f=(o==null?void 0:o.target)??this.state.value,d=this.state.value!==f,h=this.getStateNode(f),y={reenter:!l&&!d&&!(o!=null&&o.internal),transition:o,stateNode:h,target:f,changed:d};return this.log("NextState:",`[${c.type}]`,this.state.value,"---->",y.target),y}),g(this,"getAfterActions",(r,c)=>{let o;const l=this.state.value;return{entry:()=>{o=globalThis.setTimeout(()=>{const f=this.getNextStateInfo(r,this.state.event);this.performStateChangeEffects(l,f,this.state.event)},c)},exit:()=>{globalThis.clearTimeout(o)}}}),g(this,"getDelayedEventActions",r=>{const c=this.getStateNode(r),o=this.state.event;if(!c||!c.after)return;const l=[],f=[];if(pt(c.after)){const d=this.determineTransition(c.after,o);if(!d)return;if(!Oe(d,"delay"))throw new Error(`[@zag-js/core > after] Delay is required for after transition: ${JSON.stringify(d)}`);const p=Z(d.delay,this.delayMap)(this.contextSnapshot,o),y=this.getAfterActions(d,p);return l.push(y.entry),f.push(y.exit),{entries:l,exits:f}}if(ct(c.after))for(const d in c.after){const h=c.after[d],y=Z(d,this.delayMap)(this.contextSnapshot,o),T=this.getAfterActions(h,y);l.push(T.entry),f.push(T.exit)}return{entries:l,exits:f}}),g(this,"executeActions",(r,c)=>{var l;const o=Et(r,this.guardMap)(this.contextSnapshot,c,this.guardMeta);for(const f of x(o)){const d=C(f)?(l=this.actionMap)==null?void 0:l[f]:f;ut(C(f)&&!d,`[@zag-js/core > execute-actions] No implementation found for action: \`${f}\``),d==null||d(this.state.context,c,this.meta)}}),g(this,"executeActivities",(r,c,o)=>{var l;for(const f of c){const d=C(f)?(l=this.activityMap)==null?void 0:l[f]:f;if(!d){ut(`[@zag-js/core > execute-activity] No implementation found for activity: \`${f}\``);continue}const h=d(this.state.context,r,this.meta);if(h){const p=C(f)?f:f.name||Ht();this.addActivityCleanup(o??this.state.value,p,h)}}}),g(this,"createEveryActivities",(r,c)=>{if(r)if(pt(r)){const o=x(r).find(h=>{const p=h.delay,T=Z(p,this.delayMap)(this.contextSnapshot,this.state.event);return Pe(h.guard,this.guardMap)(this.contextSnapshot,this.state.event,this.guardMeta)??T!=null});if(!o)return;const f=Z(o.delay,this.delayMap)(this.contextSnapshot,this.state.event);c(()=>{const h=globalThis.setInterval(()=>{this.executeActions(o.actions,this.state.event)},f);return()=>{globalThis.clearInterval(h)}})}else for(const o in r){const l=r==null?void 0:r[o],d=Z(o,this.delayMap)(this.contextSnapshot,this.state.event);c(()=>{const p=globalThis.setInterval(()=>{this.executeActions(l,this.state.event)},d);return()=>{globalThis.clearInterval(p)}})}}),g(this,"setEvent",r=>{this.state.previousEvent=this.state.event,this.state.event=Yt(I(r))}),g(this,"performExitEffects",(r,c)=>{const o=this.state.value;if(o==="")return;const l=r?this.getStateNode(r):void 0;this.stopActivities(o);const f=Et(l==null?void 0:l.exit,this.guardMap)(this.contextSnapshot,c,this.guardMeta),d=x(f),h=this.delayedEvents.get(o);h&&d.push(...h),this.executeActions(d,c),this.delayedEvents.delete(o)}),g(this,"performEntryEffects",(r,c)=>{const o=this.getStateNode(r),l=x(o==null?void 0:o.activities);this.createEveryActivities(o==null?void 0:o.every,p=>{l.unshift(p)}),l.length>0&&this.executeActivities(c,l);const f=Et(o==null?void 0:o.entry,this.guardMap)(this.contextSnapshot,c,this.guardMeta),d=x(f),h=this.getDelayedEventActions(r);o!=null&&o.after&&h&&(this.delayedEvents.set(r,h==null?void 0:h.exits),d.push(...h.entries)),this.executeActions(d,c),(o==null?void 0:o.type)==="final"&&(this.state.done=!0,this.doneListeners.forEach(p=>{p(this.stateSnapshot)}),this.stop())}),g(this,"performTransitionEffects",(r,c)=>{const o=this.determineTransition(r,c);this.executeActions(o==null?void 0:o.actions,c)}),g(this,"performStateChangeEffects",(r,c,o)=>{this.setEvent(o);const l=c.changed||c.reenter;l&&this.performExitEffects(r,o),this.performTransitionEffects(c.transition,o),this.setState(c.target),l&&this.performEntryEffects(c.target,o)}),g(this,"determineTransition",(r,c)=>{const o=qs(r,this.guardMap);return o==null?void 0:o(this.contextSnapshot,c,this.guardMeta)}),g(this,"sendParent",r=>{var o;this.parent||lt("[@zag-js/core > send-parent] Cannot send event to an unknown parent");const c=I(r);(o=this.parent)==null||o.send(c)}),g(this,"log",(...r)=>{}),g(this,"send",r=>{const c=I(r);this.transition(this.state.value,c)}),g(this,"transition",(r,c)=>{var h,p;const o=C(r)?this.getStateNode(r):r==null?void 0:r.stateNode,l=I(c);if(!o&&!this.config.on){const y=this.status==="Stopped"?"[@zag-js/core > transition] Cannot transition a stopped machine":`[@zag-js/core > transition] State does not have a definition for \`state\`: ${r}, \`event\`: ${l.type}`;ut(y);return}const f=((h=o==null?void 0:o.on)==null?void 0:h[l.type])??((p=this.config.on)==null?void 0:p[l.type]),d=this.getNextStateInfo(f,l);return this.performStateChangeEffects(this.state.value,d,l),d.stateNode}),g(this,"subscribe",r=>(this.stateListeners.add(r),this.status==="Running"&&r(this.stateSnapshot),()=>{this.stateListeners.delete(r)})),g(this,"onDone",r=>(this.doneListeners.add(r),this)),g(this,"onTransition",r=>(this.stateListeners.add(r),this.status==="Running"&&r(this.stateSnapshot),this)),this.config=W(t),this.options=W(e??{}),this.id=this.config.id??`machine-${Ht()}`,this.guardMap=((s=this.options)==null?void 0:s.guards)??{},this.actionMap=((n=this.options)==null?void 0:n.actions)??{},this.delayMap=((i=this.options)==null?void 0:i.delays)??{},this.activityMap=((a=this.options)==null?void 0:a.activities)??{},this.sync=((u=this.options)==null?void 0:u.sync)??!1,this.state=Hs(this.config),this.initialContext=z(this.state.context)}get stateSnapshot(){return k(z(this.state))}getState(){return this.stateSnapshot}get contextSnapshot(){return this.stateSnapshot.context}get self(){const t=this;return{id:this.id,send:this.send.bind(this),sendParent:this.sendParent.bind(this),sendChild:this.sendChild.bind(this),stop:this.stop.bind(this),stopChild:this.stopChild.bind(this),spawn:this.spawn.bind(this),stopActivity:this.stopActivity.bind(this),get state(){return t.stateSnapshot},get initialContext(){return t.initialContext},get initialState(){var e;return((e=t.initialState)==null?void 0:e.target)??""}}}get meta(){var t;return{state:this.stateSnapshot,guards:this.guardMap,send:this.send.bind(this),self:this.self,initialContext:this.initialContext,initialState:((t=this.initialState)==null?void 0:t.target)??"",getState:()=>this.stateSnapshot,getAction:e=>this.actionMap[e],getGuard:e=>this.guardMap[e]}}get guardMeta(){return{state:this.stateSnapshot}}get[Symbol.toStringTag](){return"Machine"}getHydrationState(){const t=this.getState();return{value:t.value,tags:t.tags}}},Zs=(t,e)=>new Us(t,e),Js=(...t)=>t.map(e=>{var s;return(s=e==null?void 0:e.trim)==null?void 0:s.call(e)}).filter(Boolean).join(" "),Qs=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,Xt=t=>{const e={};let s;for(;s=Qs.exec(t);)e[s[1]]=s[2];return e},tn=(t,e)=>{if(C(t)){if(C(e))return`${t};${e}`;t=Xt(t)}else C(e)&&(e=Xt(e));return Object.assign({},t??{},e??{})};function Un(...t){let e={};for(let s of t){for(let n in e){if(n.startsWith("on")&&typeof e[n]=="function"&&typeof s[n]=="function"){e[n]=Ct(s[n],e[n]);continue}if(n==="className"||n==="class"){e[n]=Js(e[n],s[n]);continue}if(n==="style"){e[n]=tn(e[n],s[n]);continue}e[n]=s[n]!==void 0?s[n]:e[n]}for(let n in s)e[n]===void 0&&(e[n]=s[n])}return e}function Zn(t){return new Proxy({},{get(){return t}})}var en=()=>t=>Array.from(new Set(t)),dt=(t,e=[])=>({parts:(...s)=>{if(sn(e))return dt(t,s);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...s)=>dt(t,[...e,...s]),rename:s=>dt(s,e),keys:()=>e,build:()=>[...new Set(e)].reduce((s,n)=>Object.assign(s,{[n]:{selector:[`&[data-scope="${G(t)}"][data-part="${G(n)}"]`,`& [data-scope="${G(t)}"][data-part="${G(n)}"]`].join(", "),attrs:{"data-scope":G(t),"data-part":G(n)}}}),{})}),G=t=>t.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),sn=t=>t.length===0;function nn(t){const e={each(s){var n;for(let i=0;i<((n=t.frames)==null?void 0:n.length);i+=1){const a=t.frames[i];a&&s(a)}},addEventListener(s,n,i){return e.each(a=>{try{a.document.addEventListener(s,n,i)}catch{}}),()=>{try{e.removeEventListener(s,n,i)}catch{}}},removeEventListener(s,n,i){e.each(a=>{try{a.document.removeEventListener(s,n,i)}catch{}})}};return e}function rn(t){const e=t.frameElement!=null?t.parent:null;return{addEventListener:(s,n,i)=>{try{e==null||e.addEventListener(s,n,i)}catch{}return()=>{try{e==null||e.removeEventListener(s,n,i)}catch{}}},removeEventListener:(s,n,i)=>{try{e==null||e.removeEventListener(s,n,i)}catch{}}}}var qt="pointerdown.outside",Ut="focus.outside";function on(t){for(const e of t)if(S(e)&&M(e))return!0;return!1}var Ae=t=>"clientY"in t;function an(t,e){if(!Ae(e)||!t)return!1;const s=t.getBoundingClientRect();return s.width===0||s.height===0?!1:s.top<=e.clientY&&e.clientY<=s.top+s.height&&s.left<=e.clientX&&e.clientX<=s.left+s.width}function cn(t,e){return t.y<=e.y&&e.y<=t.y+t.height&&t.x<=e.x&&e.x<=t.x+t.width}function Zt(t,e){if(!e||!Ae(t))return!1;const s=e.scrollHeight>e.clientHeight,n=s&&t.clientX>e.offsetLeft+e.clientWidth,i=e.scrollWidth>e.clientWidth,a=i&&t.clientY>e.offsetTop+e.clientHeight,u={x:e.offsetLeft,y:e.offsetTop,width:e.clientWidth+(s?16:0),height:e.clientHeight+(i?16:0)},r={x:t.clientX,y:t.clientY};return cn(u,r)?n||a:!1}function un(t,e){const{exclude:s,onFocusOutside:n,onPointerDownOutside:i,onInteractOutside:a,defer:u}=e;if(!t)return;const r=_(t),c=H(t),o=nn(c),l=rn(c);function f(b){const N=R(b);if(!S(N)||!N.isConnected||ht(t,N)||an(t,b))return!1;const P=r.querySelector(`[aria-controls="${t.id}"]`);if(P){const L=Tt(P);if(Zt(b,L))return!1}const st=Tt(t);return Zt(b,st)?!1:!(s!=null&&s(N))}const d=new Set;function h(b){function N(){var L;const P=u?V:X=>X(),st=((L=b.composedPath)==null?void 0:L.call(b))??[b.target];P(()=>{if(!(!t||!f(b))){if(i||a){const X=Ct(i,a);t.addEventListener(qt,X,{once:!0})}Jt(t,qt,{bubbles:!1,cancelable:!0,detail:{originalEvent:b,contextmenu:qe(b),focusable:on(st)}})}})}b.pointerType==="touch"?(d.forEach(P=>P()),d.add(D(r,"click",N,{once:!0})),d.add(l.addEventListener("click",N,{once:!0})),d.add(o.addEventListener("click",N,{once:!0}))):N()}const p=new Set,y=setTimeout(()=>{p.add(D(r,"pointerdown",h,!0)),p.add(l.addEventListener("pointerdown",h,!0)),p.add(o.addEventListener("pointerdown",h,!0))},0);function T(b){(u?V:P=>P())(()=>{if(!(!t||!f(b))){if(n||a){const P=Ct(n,a);t.addEventListener(Ut,P,{once:!0})}Jt(t,Ut,{bubbles:!1,cancelable:!0,detail:{originalEvent:b,contextmenu:!1,focusable:M(R(b))}})}})}return p.add(D(r,"focusin",T,!0)),p.add(l.addEventListener("focusin",T,!0)),p.add(o.addEventListener("focusin",T,!0)),()=>{clearTimeout(y),d.forEach(b=>b()),p.forEach(b=>b())}}function ln(t,e){const{defer:s}=e,n=s?V:a=>a(),i=[];return i.push(n(()=>{const a=typeof t=="function"?t():t;i.push(un(a,e))})),()=>{i.forEach(a=>a==null?void 0:a())}}function Jt(t,e,s){const n=t.ownerDocument.defaultView||window,i=new n.CustomEvent(e,s);return t.dispatchEvent(i)}function dn(t,e){const s=n=>{n.key==="Escape"&&(n.isComposing||e==null||e(n))};return D(_(t),"keydown",s,{capture:!0})}var F={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(t=>t.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(t){var n;const e=this.indexOf(t),s=this.topMostPointerBlockingLayer()?this.indexOf((n=this.topMostPointerBlockingLayer())==null?void 0:n.node):-1;return e<s},isTopMost(t){const e=this.layers[this.count()-1];return(e==null?void 0:e.node)===t},getNestedLayers(t){return Array.from(this.layers).slice(this.indexOf(t)+1)},isInNestedLayer(t,e){return this.getNestedLayers(t).some(s=>ht(s.node,e))},isInBranch(t){return Array.from(this.branches).some(e=>ht(e,t))},add(t){const e=this.layers.push(t);t.node.style.setProperty("--layer-index",`${e}`)},addBranch(t){this.branches.push(t)},remove(t){const e=this.indexOf(t);e<0||(e<this.count()-1&&this.getNestedLayers(t).forEach(n=>n.dismiss()),this.layers.splice(e,1),t.style.removeProperty("--layer-index"))},removeBranch(t){const e=this.branches.indexOf(t);e>=0&&this.branches.splice(e,1)},indexOf(t){return this.layers.findIndex(e=>e.node===t)},dismiss(t){var e;(e=this.layers[this.indexOf(t)])==null||e.dismiss()},clear(){this.remove(this.layers[0].node)}},Qt;function te(){F.layers.forEach(({node:t})=>{t.style.pointerEvents=F.isBelowPointerBlockingLayer(t)?"none":"auto"})}function fn(t){t.style.pointerEvents=""}function hn(t,e){const s=_(t),n=[];if(F.hasPointerBlockingLayer()&&!s.body.hasAttribute("data-inert")&&(Qt=document.body.style.pointerEvents,queueMicrotask(()=>{s.body.style.pointerEvents="none",s.body.setAttribute("data-inert","")})),e){const i=ps(e,a=>{n.push(us(a,{pointerEvents:"auto"}))});n.push(i)}return()=>{F.hasPointerBlockingLayer()||(queueMicrotask(()=>{s.body.style.pointerEvents=Qt,s.body.removeAttribute("data-inert"),s.body.style.length===0&&s.body.removeAttribute("style")}),n.forEach(i=>i()))}}function pn(t,e){if(!t){ut("[@zag-js/dismissable] node is `null` or `undefined`");return}const{onDismiss:s,pointerBlocking:n,exclude:i,debug:a}=e,u={dismiss:s,node:t,pointerBlocking:n};F.add(u),te();function r(d){var p,y;const h=R(d.detail.originalEvent);F.isBelowPointerBlockingLayer(t)||F.isInBranch(h)||((p=e.onPointerDownOutside)==null||p.call(e,d),(y=e.onInteractOutside)==null||y.call(e,d),!d.defaultPrevented&&(a&&console.log("onPointerDownOutside:",d.detail.originalEvent),s==null||s()))}function c(d){var p,y;const h=R(d.detail.originalEvent);F.isInBranch(h)||((p=e.onFocusOutside)==null||p.call(e,d),(y=e.onInteractOutside)==null||y.call(e,d),!d.defaultPrevented&&(a&&console.log("onFocusOutside:",d.detail.originalEvent),s==null||s()))}function o(d){var h;F.isTopMost(t)&&((h=e.onEscapeKeyDown)==null||h.call(e,d),!d.defaultPrevented&&s&&(d.preventDefault(),s()))}function l(d){var T;if(!t)return!1;const h=typeof i=="function"?i():i,p=Array.isArray(h)?h:[h],y=(T=e.persistentElements)==null?void 0:T.map(b=>b()).filter(S);return y&&p.push(...y),p.some(b=>ht(b,d))||F.isInNestedLayer(t,d)}const f=[n?hn(t,e.persistentElements):void 0,dn(t,o),ln(t,{exclude:l,onFocusOutside:c,onPointerDownOutside:r,defer:e.defer})];return()=>{F.remove(t),te(),fn(t),f.forEach(d=>d==null?void 0:d())}}function gn(t,e){const{defer:s}=e,n=s?V:a=>a(),i=[];return i.push(n(()=>{const a=gt(t)?t():t;i.push(pn(a,e))})),()=>{i.forEach(a=>a==null?void 0:a())}}var Y=new WeakMap,rt=new WeakMap,ot={},Ot=0,Ce=t=>t&&(t.host||Ce(t.parentNode)),yn=(t,e)=>e.map(s=>{if(t.contains(s))return s;const n=Ce(s);return n&&t.contains(n)?n:(console.error("[zag-js > ariaHidden] target",s,"in not contained inside",t,". Doing nothing"),null)}).filter(s=>!!s),bn=t=>t.localName==="next-route-announcer"||t.localName==="script"||t.hasAttribute("aria-live")?!0:t.matches("[data-live-announcer]"),vn=(t,e)=>{const{parentNode:s,markerName:n,controlAttribute:i,explicitBooleanValue:a}=e,u=yn(s,Array.isArray(t)?t:[t]);ot[n]||(ot[n]=new WeakMap);const r=ot[n],c=[],o=new Set,l=new Set(u),f=h=>{!h||o.has(h)||(o.add(h),f(h.parentNode))};u.forEach(f);const d=h=>{!h||l.has(h)||Array.prototype.forEach.call(h.children,p=>{if(o.has(p))d(p);else try{if(bn(p))return;const y=p.getAttribute(i),T=a?y==="true":y!==null&&y!=="false",b=(Y.get(p)||0)+1,N=(r.get(p)||0)+1;Y.set(p,b),r.set(p,N),c.push(p),b===1&&T&&rt.set(p,!0),N===1&&p.setAttribute(n,""),T||p.setAttribute(i,a?"true":"")}catch(y){console.error("[zag-js > ariaHidden] cannot operate on ",p,y)}})};return d(s),o.clear(),Ot++,()=>{c.forEach(h=>{const p=Y.get(h)-1,y=r.get(h)-1;Y.set(h,p),r.set(h,y),p||(rt.has(h)||h.removeAttribute(i),rt.delete(h)),y||h.removeAttribute(n)}),Ot--,Ot||(Y=new WeakMap,Y=new WeakMap,rt=new WeakMap,ot={})}},mn=t=>(Array.isArray(t)?t[0]:t).ownerDocument.body,En=(t,e=mn(t),s="data-aria-hidden")=>{if(e)return vn(t,{parentNode:e,markerName:s,controlAttribute:"aria-hidden",explicitBooleanValue:!0})},On=t=>{const e=requestAnimationFrame(()=>t());return()=>cancelAnimationFrame(e)};function wn(t,e={}){const{defer:s=!0}=e,n=s?On:a=>a(),i=[];return i.push(n(()=>{const u=(typeof t=="function"?t():t).filter(Boolean);u.length!==0&&i.push(En(u))})),()=>{i.forEach(a=>a==null?void 0:a())}}var Tn=Object.defineProperty,Nn=(t,e,s)=>e in t?Tn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,w=(t,e,s)=>Nn(t,typeof e!="symbol"?e+"":e,s),ee={activateTrap(t,e){if(t.length>0){const n=t[t.length-1];n!==e&&n.pause()}const s=t.indexOf(e);s===-1||t.splice(s,1),t.push(e)},deactivateTrap(t,e){const s=t.indexOf(e);s!==-1&&t.splice(s,1),t.length>0&&t[t.length-1].unpause()}},Sn=[],Pn=class{constructor(t,e){w(this,"trapStack"),w(this,"config"),w(this,"doc"),w(this,"state",{containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0}),w(this,"listenerCleanups",[]),w(this,"handleFocus",n=>{const i=R(n),a=this.findContainerIndex(i,n)>=0;if(a||It(i))a&&(this.state.mostRecentlyFocusedNode=i);else{n.stopImmediatePropagation();let u,r=!0;if(this.state.mostRecentlyFocusedNode)if(U(this.state.mostRecentlyFocusedNode)>0){const c=this.findContainerIndex(this.state.mostRecentlyFocusedNode),{tabbableNodes:o}=this.state.containerGroups[c];if(o.length>0){const l=o.findIndex(f=>f===this.state.mostRecentlyFocusedNode);l>=0&&(this.config.isKeyForward(this.state.recentNavEvent)?l+1<o.length&&(u=o[l+1],r=!1):l-1>=0&&(u=o[l-1],r=!1))}}else this.state.containerGroups.some(c=>c.tabbableNodes.some(o=>U(o)>0))||(r=!1);else r=!1;r&&(u=this.findNextNavNode({target:this.state.mostRecentlyFocusedNode,isBackward:this.config.isKeyBackward(this.state.recentNavEvent)})),u?this.tryFocus(u):this.tryFocus(this.state.mostRecentlyFocusedNode||this.getInitialFocusNode())}this.state.recentNavEvent=void 0}),w(this,"handlePointerDown",n=>{const i=R(n);if(!(this.findContainerIndex(i,n)>=0)){if(Q(this.config.clickOutsideDeactivates,n)){this.deactivate({returnFocus:this.config.returnFocusOnDeactivate});return}Q(this.config.allowOutsideClick,n)||n.preventDefault()}}),w(this,"handleClick",n=>{const i=R(n);this.findContainerIndex(i,n)>=0||Q(this.config.clickOutsideDeactivates,n)||Q(this.config.allowOutsideClick,n)||(n.preventDefault(),n.stopImmediatePropagation())}),w(this,"handleTabKey",n=>{if(this.config.isKeyForward(n)||this.config.isKeyBackward(n)){this.state.recentNavEvent=n;const i=this.config.isKeyBackward(n),a=this.findNextNavNode({event:n,isBackward:i});if(!a)return;J(n)&&n.preventDefault(),this.tryFocus(a)}}),w(this,"handleEscapeKey",n=>{An(n)&&Q(this.config.escapeDeactivates,n)!==!1&&(n.preventDefault(),this.deactivate())}),w(this,"_mutationObserver"),w(this,"setupMutationObserver",()=>{const n=this.doc.defaultView||window;this._mutationObserver=new n.MutationObserver(i=>{i.some(u=>Array.from(u.removedNodes).some(c=>c===this.state.mostRecentlyFocusedNode))&&this.tryFocus(this.getInitialFocusNode())})}),w(this,"updateObservedNodes",()=>{var n;(n=this._mutationObserver)==null||n.disconnect(),this.state.active&&!this.state.paused&&this.state.containers.map(i=>{var a;(a=this._mutationObserver)==null||a.observe(i,{subtree:!0,childList:!0})})}),w(this,"getInitialFocusNode",()=>{let n=this.getNodeForOption("initialFocus",{hasFallback:!0});if(n===!1)return!1;if(n===void 0||n&&!M(n))if(this.findContainerIndex(this.doc.activeElement)>=0)n=this.doc.activeElement;else{const i=this.state.tabbableGroups[0];n=i&&i.firstTabbableNode||this.getNodeForOption("fallbackFocus")}else n===null&&(n=this.getNodeForOption("fallbackFocus"));if(!n)throw new Error("Your focus-trap needs to have at least one focusable element");return n.isConnected||(n=this.getNodeForOption("fallbackFocus")),n}),w(this,"tryFocus",n=>{if(n!==!1&&n!==re(this.doc)){if(!n||!n.focus){this.tryFocus(this.getInitialFocusNode());return}n.focus({preventScroll:!!this.config.preventScroll}),this.state.mostRecentlyFocusedNode=n,Cn(n)&&n.select()}}),w(this,"deactivate",n=>{if(!this.state.active)return this;const i={onDeactivate:this.config.onDeactivate,onPostDeactivate:this.config.onPostDeactivate,checkCanReturnFocus:this.config.checkCanReturnFocus,...n};clearTimeout(this.state.delayInitialFocusTimer),this.state.delayInitialFocusTimer=void 0,this.removeListeners(),this.state.active=!1,this.state.paused=!1,this.updateObservedNodes(),ee.deactivateTrap(this.trapStack,this);const a=this.getOption(i,"onDeactivate"),u=this.getOption(i,"onPostDeactivate"),r=this.getOption(i,"checkCanReturnFocus"),c=this.getOption(i,"returnFocus","returnFocusOnDeactivate");a==null||a();const o=()=>{se(()=>{if(c){const l=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);this.tryFocus(l)}u==null||u()})};if(c&&r){const l=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);return r(l).then(o,o),this}return o(),this}),w(this,"pause",n=>{if(this.state.paused||!this.state.active)return this;const i=this.getOption(n,"onPause"),a=this.getOption(n,"onPostPause");return this.state.paused=!0,i==null||i(),this.removeListeners(),this.updateObservedNodes(),a==null||a(),this}),w(this,"unpause",n=>{if(!this.state.paused||!this.state.active)return this;const i=this.getOption(n,"onUnpause"),a=this.getOption(n,"onPostUnpause");return this.state.paused=!1,i==null||i(),this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),a==null||a(),this}),w(this,"updateContainerElements",n=>(this.state.containers=Array.isArray(n)?n.filter(Boolean):[n].filter(Boolean),this.state.active&&this.updateTabbableNodes(),this.updateObservedNodes(),this)),w(this,"getReturnFocusNode",n=>{const i=this.getNodeForOption("setReturnFocus",{params:[n]});return i||(i===!1?!1:n)}),w(this,"getOption",(n,i,a)=>n&&n[i]!==void 0?n[i]:this.config[a||i]),w(this,"getNodeForOption",(n,{hasFallback:i=!1,params:a=[]}={})=>{let u=this.config[n];if(typeof u=="function"&&(u=u(...a)),u===!0&&(u=void 0),!u){if(u===void 0||u===!1)return u;throw new Error(`\`${n}\` was specified but was not a node, or did not return a node`)}let r=u;if(typeof u=="string"){try{r=this.doc.querySelector(u)}catch(c){throw new Error(`\`${n}\` appears to be an invalid selector; error="${c.message}"`)}if(!r&&!i)throw new Error(`\`${n}\` as selector refers to no known node`)}return r}),w(this,"findNextNavNode",n=>{const{event:i,isBackward:a=!1}=n,u=n.target||R(i);this.updateTabbableNodes();let r=null;if(this.state.tabbableGroups.length>0){const c=this.findContainerIndex(u,i),o=c>=0?this.state.containerGroups[c]:void 0;if(c<0)a?r=this.state.tabbableGroups[this.state.tabbableGroups.length-1].lastTabbableNode:r=this.state.tabbableGroups[0].firstTabbableNode;else if(a){let l=this.state.tabbableGroups.findIndex(({firstTabbableNode:f})=>u===f);if(l<0&&((o==null?void 0:o.container)===u||M(u)&&!j(u)&&!(o!=null&&o.nextTabbableNode(u,!1)))&&(l=c),l>=0){const f=l===0?this.state.tabbableGroups.length-1:l-1,d=this.state.tabbableGroups[f];r=U(u)>=0?d.lastTabbableNode:d.lastDomTabbableNode}else J(i)||(r=o==null?void 0:o.nextTabbableNode(u,!1))}else{let l=this.state.tabbableGroups.findIndex(({lastTabbableNode:f})=>u===f);if(l<0&&((o==null?void 0:o.container)===u||M(u)&&!j(u)&&!(o!=null&&o.nextTabbableNode(u)))&&(l=c),l>=0){const f=l===this.state.tabbableGroups.length-1?0:l+1,d=this.state.tabbableGroups[f];r=U(u)>=0?d.firstTabbableNode:d.firstDomTabbableNode}else J(i)||(r=o==null?void 0:o.nextTabbableNode(u))}}else r=this.getNodeForOption("fallbackFocus");return r}),this.trapStack=e.trapStack||Sn;const s={returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward(n){return J(n)&&!n.shiftKey},isKeyBackward(n){return J(n)&&n.shiftKey},...e};this.doc=s.document||_(Array.isArray(t)?t[0]:t),this.config=s,this.updateContainerElements(t),this.setupMutationObserver()}get active(){return this.state.active}get paused(){return this.state.paused}findContainerIndex(t,e){const s=typeof(e==null?void 0:e.composedPath)=="function"?e.composedPath():void 0;return this.state.containerGroups.findIndex(({container:n,tabbableNodes:i})=>n.contains(t)||(s==null?void 0:s.includes(n))||i.find(a=>a===t))}updateTabbableNodes(){if(this.state.containerGroups=this.state.containers.map(t=>{const e=le(t),s=ue(t),n=e.length>0?e[0]:void 0,i=e.length>0?e[e.length-1]:void 0,a=s.find(o=>j(o)),u=s.slice().reverse().find(o=>j(o)),r=!!e.find(o=>U(o)>0);function c(o,l=!0){const f=e.indexOf(o);return f<0?l?s.slice(s.indexOf(o)+1).find(d=>j(d)):s.slice(0,s.indexOf(o)).reverse().find(d=>j(d)):e[f+(l?1:-1)]}return{container:t,tabbableNodes:e,focusableNodes:s,posTabIndexesFound:r,firstTabbableNode:n,lastTabbableNode:i,firstDomTabbableNode:a,lastDomTabbableNode:u,nextTabbableNode:c}}),this.state.tabbableGroups=this.state.containerGroups.filter(t=>t.tabbableNodes.length>0),this.state.tabbableGroups.length<=0&&!this.getNodeForOption("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(this.state.containerGroups.find(t=>t.posTabIndexesFound)&&this.state.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")}addListeners(){if(this.state.active)return ee.activateTrap(this.trapStack,this),this.state.delayInitialFocusTimer=this.config.delayInitialFocus?se(()=>{this.tryFocus(this.getInitialFocusNode())}):this.tryFocus(this.getInitialFocusNode()),this.listenerCleanups.push(D(this.doc,"focusin",this.handleFocus,!0),D(this.doc,"mousedown",this.handlePointerDown,{capture:!0,passive:!1}),D(this.doc,"touchstart",this.handlePointerDown,{capture:!0,passive:!1}),D(this.doc,"click",this.handleClick,{capture:!0,passive:!1}),D(this.doc,"keydown",this.handleTabKey,{capture:!0,passive:!1}),D(this.doc,"keydown",this.handleEscapeKey)),this}removeListeners(){if(this.state.active)return this.listenerCleanups.forEach(t=>t()),this.listenerCleanups=[],this}activate(t){if(this.state.active)return this;const e=this.getOption(t,"onActivate"),s=this.getOption(t,"onPostActivate"),n=this.getOption(t,"checkCanFocusTrap");n||this.updateTabbableNodes(),this.state.active=!0,this.state.paused=!1,this.state.nodeFocusedBeforeActivation=this.doc.activeElement||null,e==null||e();const i=()=>{n&&this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),s==null||s()};return n?(n(this.state.containers.concat()).then(i,i),this):(i(),this)}},J=t=>t.key==="Tab",Q=(t,...e)=>typeof t=="function"?t(...e):t,An=t=>!t.isComposing&&t.key==="Escape",se=t=>setTimeout(t,0),Cn=t=>t.localName==="input"&&"select"in t&&typeof t.select=="function";function In(t,e={}){let s;const n=V(()=>{const i=typeof t=="function"?t():t;if(i){s=new Pn(i,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,delayInitialFocus:!1,fallbackFocus:i,...e,document:_(i)});try{s.activate()}catch{}}});return function(){s==null||s.deactivate(),n()}}var wt="data-scroll-lock";function ne(t,e){if(!t)return;const s=Object.keys(e).reduce((n,i)=>(n[i]=t.style.getPropertyValue(i),n),{});return Object.assign(t.style,e),()=>{Object.assign(t.style,s)}}function Fn(t,e,s){if(!t)return;const n=t.style.getPropertyValue(e);return t.style.setProperty(e,s),()=>{n?t.style.setProperty(e,n):t.style.removeProperty(e)}}function Dn(t){const e=t.getBoundingClientRect().left;return Math.round(e)+t.scrollLeft?"paddingLeft":"paddingRight"}function Ln(t){const e=t??document,s=e.defaultView??window,{documentElement:n,body:i}=e;if(i.hasAttribute(wt))return;i.setAttribute(wt,"");const u=s.innerWidth-n.clientWidth,r=()=>Fn(n,"--scrollbar-width",`${u}px`),c=Dn(n),o=()=>ne(i,{overflow:"hidden",[c]:`${u}px`}),l=()=>{const{scrollX:d,scrollY:h,visualViewport:p}=s,y=(p==null?void 0:p.offsetLeft)??0,T=(p==null?void 0:p.offsetTop)??0,b=ne(i,{position:"fixed",overflow:"hidden",top:`${-(h-Math.floor(T))}px`,left:`${-(d-Math.floor(y))}px`,right:"0",[c]:`${u}px`});return()=>{b==null||b(),s.scrollTo({left:d,top:h,behavior:"instant"})}},f=[r(),He()?l():o()];return()=>{f.forEach(d=>d==null?void 0:d()),i.removeAttribute(wt)}}var kn=dt("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),B=kn.build(),v=ns({getPositionerId:t=>{var e;return((e=t.ids)==null?void 0:e.positioner)??`dialog:${t.id}:positioner`},getBackdropId:t=>{var e;return((e=t.ids)==null?void 0:e.backdrop)??`dialog:${t.id}:backdrop`},getContentId:t=>{var e;return((e=t.ids)==null?void 0:e.content)??`dialog:${t.id}:content`},getTriggerId:t=>{var e;return((e=t.ids)==null?void 0:e.trigger)??`dialog:${t.id}:trigger`},getTitleId:t=>{var e;return((e=t.ids)==null?void 0:e.title)??`dialog:${t.id}:title`},getDescriptionId:t=>{var e;return((e=t.ids)==null?void 0:e.description)??`dialog:${t.id}:description`},getCloseTriggerId:t=>{var e;return((e=t.ids)==null?void 0:e.closeTrigger)??`dialog:${t.id}:close`},getContentEl:t=>v.getById(t,v.getContentId(t)),getPositionerEl:t=>v.getById(t,v.getPositionerId(t)),getBackdropEl:t=>v.getById(t,v.getBackdropId(t)),getTriggerEl:t=>v.getById(t,v.getTriggerId(t)),getTitleEl:t=>v.getById(t,v.getTitleId(t)),getDescriptionEl:t=>v.getById(t,v.getDescriptionId(t)),getCloseTriggerEl:t=>v.getById(t,v.getCloseTriggerId(t))});function Jn(t,e,s){const n=t.context["aria-label"],i=t.matches("open"),a=t.context.renderedElements;return{open:i,setOpen(u){u!==i&&e(u?"OPEN":"CLOSE")},getTriggerProps(){return s.button({...B.trigger.attrs,dir:t.context.dir,id:v.getTriggerId(t.context),"aria-haspopup":"dialog",type:"button","aria-expanded":i,"data-state":i?"open":"closed","aria-controls":v.getContentId(t.context),onClick(u){u.defaultPrevented||e("TOGGLE")}})},getBackdropProps(){return s.element({...B.backdrop.attrs,dir:t.context.dir,hidden:!i,id:v.getBackdropId(t.context),"data-state":i?"open":"closed"})},getPositionerProps(){return s.element({...B.positioner.attrs,dir:t.context.dir,id:v.getPositionerId(t.context),style:{pointerEvents:i?void 0:"none"}})},getContentProps(){return s.element({...B.content.attrs,dir:t.context.dir,role:t.context.role,hidden:!i,id:v.getContentId(t.context),tabIndex:-1,"data-state":i?"open":"closed","aria-modal":!0,"aria-label":n||void 0,"aria-labelledby":n||!a.title?void 0:v.getTitleId(t.context),"aria-describedby":a.description?v.getDescriptionId(t.context):void 0})},getTitleProps(){return s.element({...B.title.attrs,dir:t.context.dir,id:v.getTitleId(t.context)})},getDescriptionProps(){return s.element({...B.description.attrs,dir:t.context.dir,id:v.getDescriptionId(t.context)})},getCloseTriggerProps(){return s.button({...B.closeTrigger.attrs,dir:t.context.dir,id:v.getCloseTriggerId(t.context),type:"button",onClick(u){u.defaultPrevented||(u.stopPropagation(),e("CLOSE"))}})}}}function Qn(t){const e=bt(t);return Zs({id:"dialog",initial:e.open?"open":"closed",context:{role:"dialog",renderedElements:{title:!0,description:!0},modal:!0,trapFocus:!0,preventScroll:!0,closeOnInteractOutside:!0,closeOnEscape:!0,restoreFocus:!0,...e},created:["setAlertDialogProps"],watch:{open:["toggleVisibility"]},states:{open:{entry:["checkRenderedElements","syncZIndex"],activities:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed"},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}}},{guards:{isOpenControlled:s=>!!s["open.controlled"]},activities:{trackDismissableElement(s,n,{send:i}){return gn(()=>v.getContentEl(s),{defer:!0,pointerBlocking:s.modal,exclude:[v.getTriggerEl(s)],onInteractOutside(u){var r;(r=s.onInteractOutside)==null||r.call(s,u),s.closeOnInteractOutside||u.preventDefault()},persistentElements:s.persistentElements,onFocusOutside:s.onFocusOutside,onPointerDownOutside:s.onPointerDownOutside,onEscapeKeyDown(u){var r;(r=s.onEscapeKeyDown)==null||r.call(s,u),s.closeOnEscape||u.preventDefault()},onDismiss(){i({type:"CLOSE",src:"interact-outside"})}})},preventScroll(s){if(s.preventScroll)return Ln(v.getDoc(s))},trapFocus(s){return!s.trapFocus||!s.modal?void 0:In(()=>v.getContentEl(s),{preventScroll:!0,returnFocusOnDeactivate:!!s.restoreFocus,initialFocus:s.initialFocusEl,setReturnFocus:i=>{var a;return((a=s.finalFocusEl)==null?void 0:a.call(s))??i}})},hideContentBelow(s){return s.modal?wn(()=>[v.getContentEl(s)],{defer:!0}):void 0}},actions:{setAlertDialogProps(s){s.role==="alertdialog"&&(s.initialFocusEl||(s.initialFocusEl=()=>v.getCloseTriggerEl(s)),s.closeOnInteractOutside=!1)},checkRenderedElements(s){V(()=>{s.renderedElements.title=!!v.getTitleEl(s),s.renderedElements.description=!!v.getDescriptionEl(s)})},syncZIndex(s){V(()=>{const n=v.getContentEl(s);if(!n)return;const i=Ve(n);[v.getPositionerEl(s),v.getBackdropEl(s)].forEach(u=>{u==null||u.style.setProperty("--z-index",i.zIndex)})})},invokeOnClose(s){var n;(n=s.onOpenChange)==null||n.call(s,{open:!1})},invokeOnOpen(s){var n;(n=s.onOpenChange)==null||n.call(s,{open:!0})},toggleVisibility(s,n,{send:i}){i({type:s.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:n})}}})}en()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]);export{Rn as A,ue as B,Mn as C,jn as D,Hn as E,zn as F,qn as G,Rt as H,kn as I,xn as M,en as a,z as b,Zs as c,Es as d,Zn as e,Qn as f,me as g,Jn as h,ws as i,ft as j,_ as k,dt as l,Un as m,ns as n,$n as o,Wn as p,Gn as q,Yt as r,Gt as s,Kn as t,Bn as u,_n as v,Vn as w,S as x,Xn as y,Yn as z};
